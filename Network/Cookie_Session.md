## HTTP 프로토콜에 대한 이해

HTTP 프로토콜은 Connectionless 하고 Statelsess 한 프로토콜이다.

- Connectionless — 클라이언트가 서버에 요청을 하고 서버가 클라이언트에게 응답을 보내면 접속을 끊는다.

- Stateless — 통신이 끝나면 상태 정보를 유지하지 않는다.

Connectionless 하고 Stateless 한 HTTP 프로토콜을 사용하면서 Server가 Client를 식별할 수 있는 방법이 필요했고 쿠키와 세션을 사용하게 되었다.

### 세션

[위키백과 - 세션 (컴퓨터 과학)](https://ko.wikipedia.org/wiki/%EC%84%B8%EC%85%98_(%EC%BB%B4%ED%93%A8%ED%84%B0_%EA%B3%BC%ED%95%99))

```shell
세션(session)은 컴퓨터 과학에서, 특히 네트워크 분야에서 반영구적이고 상호작용적인 정보 교환을 전제하는 둘 이상의 통신 장치나 컴퓨터와 사용자 간의 대화나 송수신 연결상태를 의미하는 보안적인 다이얼로그(dialogue) 및 시간대를 가리킨다. 
- 위키백과 -
```

일정 시간 동안 같은 사용자(클라이언트)로부터 들어오는 일련의 요구를 하나의 상태로 보고, 그 상태를 일정하게 유지시키는 기술.
일정 시간이란 방문자가 웹 브라우저를 통해 서버에 접속한 시점으로부터 웹 브라우저를 종료함으로써 연결을 끝내는 시점.

- 세션은 쿠키를 기반하고 있지만, 사용자 정보 파일을 브라우저에 저장하는 쿠키와 달리 세션은 서버측에서 관리한다.
- 서버에서 클라이언트를 구분하기 위해 세션 ID를 부여하며, 웹 브라우저가 서버에 접속해서 브라우저를 종료할 때까지 인증 상태를 유지한다.
- 사용자에 대한 정보를 세션에 두기 때문에 쿠키보다 보안에 좋지만, 사용자가 많아질수록 `서버 메모리를 많이 차지`하게 된다. 동접자 수가 많은 웹 사이트인 경우 서버에 과부하를 주게되므로 성능 저하의 요인이 된다.
- 클라이언트가 Request를 보내면, 해당 서버의 엔진이 클라이언트에게 유일한 ID를 부여하는데 이것이 세션 ID이다.

### 쿠키

특정 웹 사이트에 방문하였을 때 만들어지는 정보를 담는 데이터 파일.

- 클라이언트 로컬에 저장되는 키와 값이 들어있는 작은 데이터 파일
- Response Header에 Set-Cookie 속성을 사용하면 클라이언트에 쿠키를 만들 수 있다.
- 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 Request 시에 Request Header에 넣어서 자동으로 서버에 전송한다.
- 쿠키의 구성 요소
    - 이름 — 각각의 쿠키를 구별하는 데 사용되는 이름
    - 값 — 쿠키의 이름과 관련된 값
    - 유효시간 — 쿠키의 유지시간
    - 도메인 — 쿠키를 전송할 도메인
    - 경로 — 쿠키를 전송할 요청 경로
- 쿠키의 동작방식
    - 클라이언트가 페이지를 요청
    - 서버에서 쿠키를 생성
    - HTTP 헤더에 쿠키를 포함시켜 응답
    - 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관하고 있음
    - 같은 요청을 할 경우 HTTP 헤더에 쿠키를 함께 보냄
    - 서버에서 쿠키를 읽어 이전 상태 정보를 변경 할 필요가 있을 때, 쿠키를 업데이트 하여 변경된 쿠키를 HTTP 헤더에 포함시켜 응답

## 세션과 쿠키의 차이

- 쿠키는 클라이언트의 정보를 `클라이언트의 로컬 컴퓨터나 메모리에 저장`한다.
- 세션은 클라이언트의 요청에 따른 정보를 웹 서버가 세션 아이디 파일을 만들어 `서버에 저장`한다.
- 쿠키와 달리 세션은 서버에 저장하기 때문에 보안이 우수하다. 서버와의 접속을 계속 유지하고자 할 때, 세션을 활용하여 이전 접속 정보를 이용할 수 있다.
